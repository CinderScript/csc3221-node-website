<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hangman</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel="stylesheet">

    <!-- BOOTSTRAP -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x"
          crossorigin="anonymous">

    <!-- CSS STYLES -->
    <link rel="stylesheet" href="../stylesheets/style.css">
    <link rel="stylesheet" href="../stylesheets/hangman.css">

    <script>
        let gameWindow;
        let wordProgress;
        let manProgress;

        // Get elements and set event handlers
        document.addEventListener("DOMContentLoaded", () => {

            document.getElementById("play-btn").onclick = Run;
            document.getElementById("guess-btn").onclick = Guess;

            gameWindow = document.getElementById("game-window");
            wordProgress = document.getElementById("word-progress");
            manProgress = document.getElementById("man-progress")
        });

        // used for easier to read waiting intervals/timeouts (async style code)
        function Sleep(ms) {
            return new Promise( callback => setTimeout(callback, ms));
        }


        function Guess(){
            SetProgress( wordProgress, 80);
            SetProgress( manProgress, 20);
        }

        function Run(){

            if (gameWindow.classList.contains("d-none"))
                gameWindow.classList.remove("d-none");
            else
                gameWindow.classList.add("d-none");
        }

        async function SetProgress(bar, value){
            // temporarily animate the bar
            bar.classList.add("progress-bar-animated");

            // flash the progress bar
            let flashCount = 6;
            let interval = 120;
            for (let i = 0; i < flashCount; i++){
                if (bar.classList.contains("d-none"))
                    bar.classList.remove("d-none");
                else
                    bar.classList.add("d-none");

                await Sleep(interval);
            }

            // set the bar's new value
            bar.style.width = value+"%";
            bar.setAttribute("aria-valuenow", value);
            bar.innerText = value+"%";

            // stop the animation after a pause
            await Sleep(3000);
            bar.classList.remove("progress-bar-animated");
        }
    </script>

</head>
<body>
<nav>
    <a href="../index.html">Home</a>
    <a href="../simple-page.html">Quotes</a>
    <a href="../resume.html">Resume</a>
    <a href="../numbers.html">Numbers</a>
    <a href="#" class="active">H-A-N-G-M-A-N!</a>
</nav>

<div class="container">
    <div class="row">
        <div class="col-md-6">
            <h1 class="display-4">This...</h1>
            <h1 class="display-4">Is...</h1>
            <h1 class="display-2">H A N G M A N!!!!</h1>
        </div>
        <div class="col-md-6">
            <img id="kick-image" src="https://thumbs.dreamstime.com/b/sparta-d-render-work-path-34577790.jpg" alt="Sparta Kick">
        </div>
    </div> <!-- row -->

    <div class="row">
        <p> <!-- button is width=100% if direct child of row -->
            <button id="play-btn" type="button" class="btn btn-primary">New Game</button>
        </p>
    </div> <!-- row -->

    <div id="game-window" class="row">
        <div class="col-md-6 p-0">
            <div class="game-controls">
                <button id="guess-btn" type="button" class="btn btn-primary">Guess</button>
            </div>
        </div>
        <div class="col-md-6 p-0">
            <div class="game-output">
                <p>happy days</p>
            </div>
        </div>

        <div class="col-md-12">
            <label class="mt-2" for="word-progress">Game Progress: </label>
            <div class="progress">
                <div id="word-progress" class="progress-bar progress-bar-striped" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>

        <div class="col-md-12">
            <label class="mt-2" for="man-progress">Game Progress: </label>
            <div class="progress">
                <div id="man-progress" class="progress-bar progress-bar-striped bg-danger" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>
    </div> <!-- row -->

</div>

<!-- Option 1: Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
</body>
</html>